<!DOCTYPE html>
<html lang="en">
  <head>
        <meta name="description" content="Always verify that your backups are working before you need them" />
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;user-scalable=no;target-densitydpi=device-dpi">
    <title>Worthless Backups - Michael Lustfield</title>
    <link rel="stylesheet" type="text/css" href="https://michael.lustfield.net/theme/css/combined.css" />
    <!--[if lt IE 9]><script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script><script src="https://michael.lustfield.net/theme/js/html5shiv.js"></script><![endif]-->
    <link rel="shortcut icon" type="image/png" href="https://michael.lustfield.net/theme/img/favicon.ico" />
    <link rel="alternate" type="application/atom+xml" title="Michael Lustfield - Atom Feed" href="https://michael.lustfield.net/" /> 
    <link rel ="alternate" type="application/rss+xml" title="Michael Lustfield - RSS Feed" href="https://michael.lustfield.net/rss.xml" />
    <link rel="dns-prefetch" href="//www.google-analytics.com/">

    <meta name="author"   content="michael" />
    <meta name="keywords" content="mysql, backup, rant" />
  </head>
  <body>
    <div id="page">
      
      <div id="page-head">
        <a class="site-heading" href="https://michael.lustfield.net/">Michael Lustfield</a>
      </div>
     
      <div id="page-body" class="grid-container grid-parent">
      <div id="page-side" class="grid-15 tablet-grid-15 mobile-grid-100">          <ul id="nav-table">
          <li class="side-navigation-li">
          <nav>
            <h3>Pages</h3>
            <ul>
              <li><a href="https://michael.lustfield.net">Home</a></li>
              <!--<li><a href="https://michael.lustfield.net/categories">Categories</a></li>-->
              <!--<li><a href="https://michael.lustfield.net/archives">Archives</a></li>-->
              <li><a href="https://michael.lustfield.net/tags">Tags</a></li>
              <li><a href="https://michael.lustfield.net/pages/about-me">About Me</a></li>
              <li><a href="https://michael.lustfield.net/pages/contact-me">Contact Me</a></li>
            </ul>
          </nav>
        </li>

          <li class="side-navigation-li">
          <nav>
            <h3>Categories</h3>
            <ul>
              <li><a href="https://michael.lustfield.net/category/linux">Linux</a></li>
              <li><a href="https://michael.lustfield.net/category/misc">Misc</a></li>
              <li><a href="https://michael.lustfield.net/category/nginx">Nginx</a></li>
              <li class="active"><a href="https://michael.lustfield.net/category/rambling">Rambling</a></li>
            </ul>
          </nav>
          </li>
          <li class="side-navigation-li">
          <nav>
            <h3>Feeds</h3>
            <ul>
              <li><a href="https://michael.lustfield.net/rss.xml">RSS Feed</a></li>
              <li><a href="https://michael.lustfield.net/rambling/rss.xml">Rambling (rss)</a></li>
            </ul>
          </nav>
          </li>
          <li class="side-navigation-li">
          <nav>
            <h3>Search</h3>
	    <form action="https://www.google.com/search" method="get" name="searchform" />
              <input name="sitesearch" type="hidden" value="michael.lustfield.net" />
              <input autocomplete="on" size="12" maxlength="120" name="q" required="required"  type="text" />
              <input name="q" type="hidden" value="-tag -category -files" />
	      <br /><button class="button" type="submit">Search</button>
            </form>
          </nav>
          </li>
          </ul></div> <!-- /#page-side -->
        <div id="page-content" class="grid-80 tablet-grid-80 mobile-grid-100 right">
        <article class="post" id="page-main" role="main">
      
     
      <header class="post-header">
        <h1><a rel="bookmark" href="https://michael.lustfield.net/rambling/worthless-backups" title="Permalink «Worthless Backups»">Worthless Backups</a></h1>
        <div class="meta">
<!-- includes/article_meta.html -->
            <!--
            On <time datetime="2008-12-30T19:11:00-06:00">Tue 30 December 2008</time>
            in «<a href="https://michael.lustfield.net/category/rambling">rambling</a>» 
            by <a href="https://michael.lustfield.net/author/michael.html">michael</a>              <br />Tags:              <a rel="tag" href="https://michael.lustfield.net/tag/mysql.html">mysql</a>,               <a rel="tag" href="https://michael.lustfield.net/tag/backup.html">backup</a>,               <a rel="tag" href="https://michael.lustfield.net/tag/rant.html">rant</a>-->        </div>
      </header>
        <p>How good are your backups?</p>
<p>I thought mine were pretty dang good. I found out otherwise. I had the
following two lines running nightly for my backups.</p>
<p># Make MySQL backup</p>
<pre class="literal-block">
mysqldump -u root -p &quot;$(/.sql.pwd)&quot; --all-databases | gzip &gt; /var/mysqldump/mysql-$(date +%F).gz
</pre>
<p># Delete old copies</p>
<pre class="literal-block">
find /var/mysqldump/ -mtime +90 -exec rm {} \;
</pre>
<p>Anybody know what's wrong with that?</p>
<p>For 99% of Linux commands, this would be perfectly good syntax.
Unfortunately, this is one of those 1% times where things aren't the way
you expect them.</p>
<p>I was using -u root -p &quot;$(&lt;/root/.sql.pwd)&quot;</p>
<p>What I needed to be using was -uroot -p&quot;$(&lt;/root/.sql.pwd)&quot;</p>
<p>When working with MySQL in this syntax, you don't want a space when
passing in an argument.</p>
<p>I have a massive database issue and wasn't able to recover from it. I
tried to restore from the database backups. Problem is that I've been
creating backups of an error message. Worse yet, is I had no way of
knowing without actually going in and trying to restore from a backup.</p>
<p>Bottom line: TEST YOUR BACKUPS</p>

        <footer class="post-footer">
        <div class="meta">
            Posted in «<a href="https://michael.lustfield.net/category/rambling">rambling</a>» 
            <!--by <a href="https://michael.lustfield.net/author/michael.html">michael</a>--><br />
            Tags:  #<a href="https://michael.lustfield.net/tag/mysql.html">mysql</a> #<a href="https://michael.lustfield.net/tag/backup.html">backup</a> #<a href="https://michael.lustfield.net/tag/rant.html">rant</a>        </div>
      </footer>
      
      
      </article> <!-- /#page-main -->
</div>
        
      </div>  <!-- /#page-body -->

      <div id="page-foot">
        <p>MTecknology - <a href="/pages/keeping-it-dry">Keeping IT DRY</a><br />[<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">license</a>]</p>
      </div>
    </div> <!-- /#page -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=252297868"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '252297868');
    </script>
  </body>
</html>